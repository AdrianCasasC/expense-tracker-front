<!-- Add item modal -->
<div
  class="wrapper fixed top-0 left-0 w-screen h-screen hidden allow-discrete z-[999] bg-black/75"
  [class.show]="showModal"
>
  <div
    (clickOutside)="onCloseModal()"
    class="close-session absolute rounded centered bg-white text-black p-4 w-[90%]"
    [class.show]="showModal"
  >
    <form
      [formGroup]="itemForm"
      (ngSubmit)="onConfirmItem()"
      class="w-full flex flex-col"
    >
      <div class="mb-4 flex flex-col">
        <label for="name" class="mb-2">Nombre</label>
        <input
          formControlName="name"
          name="name"
          type="text"
          class="w-full rounded bg-white border border-black text-[12px] p-2"
          placeholder="Ej. Comida"
        />
      </div>

      <div class="mb-10">
        <label for="value" class="mb-4">Cantidad</label>
        <input
          formControlName="value"
          name="value"
          type="number"
          class="w-full rounded bg-white border border-black text-[12px] p-2"
          placeholder="Ej. 120.20"
        />
      </div>

      <div class="flex justify-between gap-4">
        <button
          (click)="onCloseModal()"
          class="w-full rounded bg-red-500 shadowed cursor-pointer text-white text-[12px] p-2"
        >
          Cancelar
        </button>
        <button
          type="submit"
          class="w-full rounded bg-orange-400 shadowed cursor-pointer text-white text-[12px] p-2"
        >
          Confirmar
        </button>
      </div>
    </form>
  </div>
</div>

<button (click)="onAddItem()" class="p-4 rounded-xl shadowed w-full mb-4">
  {{ buttonLabel() }}
</button>
@for (item of items(); track $index) {
<div
  class="w-full allow-keywords rounded-md shadowed bg-white flex justify-between items-center mb-4 relative"
  (click)="onShowItemOptions()"
>
  <div class="w-full flex justify-between p-4">
    <span>{{ item.name }}</span>
    <span>{{ item.value | numberFormatter }}</span>
  </div>
  <div
    class="w-0 h-full overflow-hidden transition-[width] duration-300 ease-in-out flex"
    [class.w-fit]="showItemOptions"
  >
    <div
      class="w-12 h-full p-4 bg-green-500 text-white"
      (click)="onEditItem(item.id!)"
    >
      Editar
    </div>
    <div
      class="w-12 h-full p-4 bg-red-500 text-white"
      (click)="onDeleteItem(item.id!)"
    >
      Eliminar
    </div>
  </div>
</div>
}
